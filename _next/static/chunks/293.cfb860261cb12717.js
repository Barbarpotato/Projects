"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[293],{5293:function(e,s,r){r.r(s);var t=r(5893),o=r(7294),a=r(4234),l=r(4614),n=r(2576),i=r(1360),d=r(7391),c=r(232),u=r(10),h=r(8329),m=r(8029),p=r(92),f=r(5443),x=r(8289),g=r(8491);let w=async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];try{let r=s.map(e=>({...e,message:void 0})),t=await fetch("https://darwin-assistant.vercel.app/api/v1/conversation/portfolio",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({history:r,message:e})});return await t.json()}catch(e){return{status:"failed",response:"Oops\uD83D\uDE1F! Darwin is currently busy, please try again later."}}};s.default=function(e){let{isOpen:s,onClose:r,btnRef:b}=e,[j,y]=(0,o.useState)(""),[D,v]=(0,o.useState)([]),[S,k]=(0,o.useState)(!1);(0,o.useEffect)(()=>{v([{role:"user",parts:[{text:""}],message:""},{role:"model",parts:[{text:"Hello I am Darwin, Darmawan's Virtual Assistant. How can I help You?"}],message:"Hello I am Darwin, Darmawan's Virtual Assistant. How can I help You?"}]),y("")},[]);let C=async()=>{if(!j.trim()||S)return;k(!0),v(e=>[...e,{role:"user",parts:[{text:j}],message:j},{role:"model",parts:[{text:"Thinking..."}],message:"Typing..."}]),y("");let e=await w(j,D);v(s=>{let r=[...s];return r[r.length-1]={role:"model",parts:[{text:e.response}],message:e.response},r}),k(!1)};return(0,t.jsxs)(a.dy,{blockScrollOnMount:!1,size:"lg",isOpen:s,placement:"right",onClose:r,finalFocusRef:b,children:[(0,t.jsx)(l.Z,{}),(0,t.jsxs)(n.s,{children:[(0,t.jsx)(i.o,{}),(0,t.jsx)(d.x,{children:(0,t.jsx)(c.X,{color:"#ff79c6",size:"md",children:"Conversation With Darwin"})}),(0,t.jsx)(u.f,{children:D.map((e,s)=>e.message?(0,t.jsx)(h.k,{direction:"column",align:"model"===e.role?"flex-start":"flex-end",children:(0,t.jsxs)(m.x,{mb:4,p:3,borderRadius:"md",bg:"model"===e.role?"#2D3748":"#4A5568",color:"white",width:"85%",transition:"all 0.2s ease-in-out",_hover:{bg:"model"===e.role?"#394150":"#5A6478",transform:"scale(1.02)",boxShadow:"md"},children:[(0,t.jsx)(p.x,{fontWeight:"bold",color:"#ff79c6",children:"model"===e.role?"Darwin":"You"}),(0,t.jsx)(p.x,{mt:1,children:e.message})]})},s):null)}),(0,t.jsxs)(f.m,{children:[(0,t.jsx)(h.k,{width:"100%",children:(0,t.jsx)(x.I,{value:j,onKeyDown:e=>{"Enter"!==e.key||S||C()},onChange:e=>y(e.target.value),borderLeftRadius:"2xl",borderRightRadius:0,borderWidth:3,borderColor:"#536189",focusBorderColor:"#ff79c6",my:2,placeholder:"Send a message...",isDisabled:S})}),(0,t.jsx)(g.z,{borderLeftRadius:0,colorScheme:"purple",my:2,onClick:C,isDisabled:S,isLoading:S,loadingText:"Sending...",children:"Send"})]})]})]})}}}]);